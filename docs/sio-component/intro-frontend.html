<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Angular :: sio-slam</title>
    <meta name="generator" content="Antora 3.0.2">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
    <link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="..">
        <span> <img style="vertical-align: middle" src="../_/img/logo-sio-slam.png" alt="logo"> &nbsp;
        sio-slam
        </span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
<!--        <div class="navbar-item has-dropdown is-hoverable">-->
<!--          <a class="navbar-link" href="#">Products</a>-->
<!--          <div class="navbar-dropdown">-->
<!--            <a class="navbar-item" href="#">Product A</a>-->
<!--            <a class="navbar-item" href="#">Product B</a>-->
<!--            <a class="navbar-item" href="#">Product C</a>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="navbar-item has-dropdown is-hoverable">-->
<!--          <a class="navbar-link" href="#">Services</a>-->
<!--          <div class="navbar-dropdown">-->
<!--            <a class="navbar-item" href="#">Service A</a>-->
<!--            <a class="navbar-item" href="#">Service B</a>-->
<!--            <a class="navbar-item" href="#">Service C</a>-->
<!--          </div>-->
<!--        </div>-->
        <a class="navbar-item" href="index-sio-slam.html">Année en cours</a>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download ?</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="sio-component" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index-glossaire.html">SIO-SLAM</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Présentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-sio-slam.html">index sio slam</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="axe-directeur-2022-2023.html">schéma directeur</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backend</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="todo-page.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="todo-page.html">Principles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="todo-page.html">Exemple</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="todo-page.html">Exercices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sous-categorie A</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="todo-page.html">item A.1</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="todo-page.html">item A.2</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="todo-page.html">item A.3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frontend</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-frontend.html">Intro</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="intro-frontend.html">Intro Angular</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Programmation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="notion-fonction.html">Fonction - l&#8217;essentiel 1/2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-qualite.html">Facteurs de qualité</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Analyse</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-analyse.html">Conduire une analyse</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-sql.html">SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-nosql.html">NoSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">UML (Unified Modeling Language)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="index-uml.html">Présentation Générale</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="d_uc.html">Diagrammes UML</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="d_uc.html">Diagramme des cas d&#8217;utilisation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="d_classe.html">Diagramme de classes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">TP et activités</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="dc_tp1.html">TP N°1</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="_attachments/TP1_CORR.pdf">Corrigé TP1</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projet-0.html">Projet 0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projet-1.html">Projet 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projet-2.html">Projet 2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projet-3.html">Projet 3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Épreuves professionnelles</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro-epreuves.html">Présentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="E4-CCF.html">E4 - CCF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="E5-CCF.html">E5 - CCF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="E6.html">E6 - épreuve nationale</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="intro-cybersecurite.html">Cybersecurite</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Activites.html">Activités</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Chiffrement_hachage.html">Chiffrement et hachage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spring_security.html">Spring Security</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Kotlin</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-kotlin.html">Les bases de Kotlin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spring Boot Kotlin</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-spring-boot.html">Initiation à Spring Boot</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index-controles-exercices.html">Contrôles &amp; Exercices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index-glossaire.html">Glossaire</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SIO-SLAM</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index-glossaire.html">SIO-SLAM</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index-glossaire.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index-sio-slam.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index-glossaire.html">SIO-SLAM</a></li>
    <li>Frontend</li>
    <li><a href="intro-frontend.html">Intro Angular</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///D:/SI6/sio-slam/sio-slam-frontend/modules/ROOT/pages/intro-frontend.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Angular</h1>
<div class="sect1">
<h2 id="_prérequis"><a class="anchor" href="#_prérequis"></a>Prérequis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On admet que vous disposez des outils nécessaires pour commencer la programmation Angular.</p>
</div>
<div class="paragraph">
<p>Afin d&#8217;aborder Angular, nous allons créer une application et étudier certains de ses particularités.</p>
</div>
<div class="paragraph">
<p><strong>Angular CLI</strong> (<em>Command Line Interface</em>) est un outil en ligne de commande pour Angular qui facilite, entre autres, la création et la configuration de nouveaux projets Angular, ainsi que la génération de composants, de services, et d&#8217;autres éléments de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Angular CLI permet également d&#8217;exécuter des tâches de développement courantes, telles que la compilation, le débogage et le déploiement de l&#8217;application.).</p>
</div>
<div class="paragraph">
<p>Bien que Angular CLI ne soit pas obligatoire, il facilite grandement le travail !</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation_de_angular_cli"><a class="anchor" href="#_installation_de_angular_cli"></a>Installation de Angular CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En ligne de commande (ouvrir un terminal) tapper la commande qui installe Angular CLI sur votre compte utilisateur (inutile d&#8217;être en admin)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm install -g @angular/cli</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Vérification</strong></p>
</div>
<div class="paragraph">
<p>On demande la version actuelle de Angular CI par la commande <code>ng version</code>. Exemple.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ng version

     _                      _                 ____ _     ___
    / \   _ __   __ _ _   _| | __ _ _ __     / ___| |   |_ _|
   / △ \ | '_ \ / _` | | | | |/ _` | '__|   | |   | |    | |
  / ___ \| | | | (_| | |_| | | (_| | |      | |___| |___ | |
 /_/   \_\_| |_|\__, |\__,_|_|\__,_|_|       \____|_____|___|
                |___/


Angular CLI: 15.1.2
Node: 16.15.1
Package Manager: npm 9.2.0
OS: linux x64

Angular:
...

Package                      Version
------------------------------------------------------
@angular-devkit/architect    0.1501.2 (cli-only)
@angular-devkit/core         15.1.2 (cli-only)
@angular-devkit/schematics   15.1.2 (cli-only)
@schematics/angular          15.1.2 (cli-only)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_création_dune_première_application"><a class="anchor" href="#_création_dune_première_application"></a>Création d’une première application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une application de type Frontend est de type mono-page, ou <strong>SPA</strong> (<em>Single Page Application</em>) qui s&#8217;exécute principalement dans le navigateur et qui communique avec le serveur qui l&#8217;a délivrée par des services web.</p>
</div>
<div class="paragraph">
<p>Les avantages d’une SPA par rapport à une application web standard sont :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de fluidifier l’expérience utilisateur en évitant de charger une nouvelle page à chaque action de l’utilisateur ;</p>
</li>
<li>
<p>de permettre de s’exécuter localement sur le navigateur de l’utilisateur.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les frameworks servant de base à une application SPA sont généralement développés avec les technologies web classiques : HTML5, CSS3, Javascript ou Typescript.</p>
</div>
<div class="paragraph">
<p>Création d&#8217;une application Angular en ligne de commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ng new projet1 --style=css --routing=false --strict</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les options indiquent le nom du projet (<em>projet1</em>), le type des fichiers de style (ici <code>css</code>), la non-application des routes de l’application, et active le mode strict selon les recommandations de la team TypeScript afin de limiter les bugs et de produire du code maintenable.</p>
</div>
<div class="paragraph">
<p>La commande a créé un dossier du nom du projet, et 2 sous-dossiers :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">.
└── projet1
    ├── node_modules
    └── src</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Le dossier <code>node_modules</code> contient les librairies JavaScript développées par des tiers (dont <code>Google</code>). Dans la version actuelle (2023) ce dossier contient 540 sous-dossiers&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Vous ne devez jamais retoucher le code des librairies de <code>node_modules</code> !
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Le dossier <code>src</code> (<em>source</em>). C&#8217;est là où vous mettrez le code de votre application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voici ce que contient le dossier <code>src</code>, à l&#8217;état initial (résultat de la commande CLI)</p>
</div>
<div class="listingblock">
<div class="title">projet1/src</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">src/
├── app
│   ├── app.component.html
│   ├── app.component.css
│   ├── app.component.spec.ts
│   ├── app.component.ts
│   └── app.module.ts
├── assets
├── favicon.ico
├── index.html
├── main.ts
└── styles.scss</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>app</code> est le composant principal de l&#8217;application. Comme tout composant Angular, il est composé de 4 parties principales :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Le code du rendu visuel (.html)</p>
</li>
<li>
<p>Le code de la mise en page (.css ou .scss)</p>
</li>
<li>
<p>Le code du composant (.ts - une classe TypeScript <em>décorée</em>)</p>
</li>
<li>
<p>Le code des tests unitaires (.ts)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_composant_principal"><a class="anchor" href="#_le_composant_principal"></a>Le composant principal</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">projet1/src/app/app.component.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Component } from '@angular/core';

@Component({ <i class="conum" data-value="1"></i><b>(1)</b>
  selector: 'app-root', <i class="conum" data-value="2"></i><b>(2)</b>
  templateUrl: './app.component.html', <i class="conum" data-value="3"></i><b>(3)</b>
  styleUrls: ['./app.component.css'] <i class="conum" data-value="4"></i><b>(4)</b>
})
export class AppComponent { <i class="conum" data-value="5"></i><b>(5)</b>
  title = 'projet1';  <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Cette annotation (décorateur) s&#8217;applique à la classe déclarée dans ce fichier</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Le sélecteur HTML qui identifie ce composant dans une page HTML</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Le code HTML de la vue de ce composant</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Le code CSS associé</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Déclaration de la classe du composant (observez la convention de nommage)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>La propriété <code>title</code> est définie ici.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_module_du_composant_principal"><a class="anchor" href="#_le_module_du_composant_principal"></a>Le module du composant principal</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>app.module.ts</code> est un fichier qui déclare les dépendances et les relations entre les différents éléments de l&#8217;application pour un composant donné, il permet de structurer et organiser l&#8217;application pour une meilleure lisibilité et maintenabilité.</p>
</div>
<div class="listingblock">
<div class="title">projet1/src/app/app.module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <strong>imports</strong> : Permettre d&#8217;importer les modules nécessaires pour ce module. Ici, on importe <code>NgModule</code> de @angular/core et <code>BrowserModule</code> de @angular/platform-browser. Ces modules sont nécessaires pour exécuter l&#8217;application dans un navigateur.</p>
</div>
<div class="paragraph">
<p>Dans @NgModule:</p>
</div>
<div class="paragraph">
<p>Les <strong>déclarations</strong> : Définir les composants (entre autres) qui appartiennent à ce module. Ici, on déclare <code>AppComponent</code> importé précédemment.</p>
</div>
<div class="paragraph">
<p>Les <strong>imports</strong> : Les imports définissent les modules qui sont utilisés par ce module. Ici, on importe <code>BrowserModule</code> pour permettre l&#8217;exécution de l&#8217;application dans un navigateur.</p>
</div>
<div class="paragraph">
<p>Les <strong>fournisseurs</strong> (<em>providers</em>): Les fournisseurs définissent les <strong>services qui sont utilisés</strong> par ce module. Ici, il n&#8217;y a pas de fournisseurs définis.</p>
</div>
<div class="paragraph">
<p>Le <strong>bootstrap</strong> : Le bootstrap définit le composant qui sera utilisé comme <strong>point d&#8217;entrée pour l&#8217;application</strong>. Ici, on utilise <code>AppComponent</code> comme point d&#8217;entrée.</p>
</div>
<div class="paragraph">
<p>à la fin L'<strong>export</strong> permet d&#8217;exporter le module pour qu&#8217;il puisse être utilisé par d&#8217;autres parties de l&#8217;application.</p>
</div>
<div class="paragraph">
<p><em>Ceci est un exemple d&#8217;un module de base, vous pourriez avoir besoin d&#8217;ajouter des déclarations, des imports, des fournisseurs ou des configurations supplémentaires selon les besoins de votre application.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_construction_de_lapplication"><a class="anchor" href="#_construction_de_lapplication"></a>Construction de l&#8217;application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La commande <strong><code>ng build</code></strong> est une commande d&#8217;Angular CLI qui permet de compiler et de construire l&#8217;application pour la production. Elle utilise la configuration de l&#8217;application définie dans le fichier <code>angular.json</code> pour compiler les sources TypeScript en JavaScript, optimiser les images et les fichiers de style, et générer les fichiers de sortie dans un format optimisé pour la production tels que les fichiers HTML, CSS et JavaScript minifiés. Le résultat est placé généralement dans un dossier appelé "<strong>dist</strong>" ou "<strong>build</strong>" et contient tous les fichiers nécessaires pour l&#8217;exécution de l&#8217;application par un navigateur.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lancement_de_lapplication"><a class="anchor" href="#_lancement_de_lapplication"></a>Lancement de l&#8217;application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous aurons besoin d&#8217;un serveur HTTP pour rendre disponible l&#8217;application à des navigateurs web. Angular CLI dispose d&#8217;une commande bien pratique, nommée <code>serve</code>.</p>
</div>
<div class="paragraph">
<p>La commande <code>ng serve</code> compile (comme le <code>build</code>) le projet et lance un serveur HTTP qui se charge de servir l&#8217;application aux requestes des navigateurs web.  Il permet également de surveiller les modifications des fichiers et de relancer automatiquement le serveur lorsque des modifications sont détectées.</p>
</div>
<div class="listingblock">
<div class="title">lancement</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ng serve</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/premier-lancement.png" alt="first">
</div>
<div class="title">Figure 1. Exemple (extrait) d&#8217;exécution dans le navigateur</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_travaux_pratiques"><a class="anchor" href="#_travaux_pratiques"></a>Travaux pratiques</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Faire en sorte que l&#8217;application ne présente <strong>que</strong> le message <code>Hello World</code> lorsqu&#8217;elle est lancée, <strong>à l&#8217;image de la capture écran ci-dessous</strong>, c&#8217;est à dire en conservant l&#8217;image SVG de la fusée.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/page-hello-world.png" alt="hello world">
</div>
<div class="title">Figure 2. Exemple</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Faire en sorte, sans changer le nom du projet, que le texte de l&#8217;onglet du navigateur soit <strong>Hello World</strong> et non pas <code>Projet1</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ajout_dun_service"><a class="anchor" href="#_ajout_dun_service"></a>Ajout d&#8217;un service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous allons faire en sorte que l&#8217;adresse IP du client soit affichée sur la page du composant principal.</p>
</div>
<div class="paragraph">
<p>Cette valeur peut être déterminée</p>
</div>
<div class="ulist">
<ul>
<li>
<p>par le serveur qui a servi l&#8217;application au client.</p>
</li>
<li>
<p>par l&#8217;application client (JS)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous retiendrons la deuxième version, qui a le mérite d&#8217;être dynamique (le client peut changer d&#8217;IP, ce qui ne serait pas connu du serveur)</p>
</div>
<div class="paragraph">
<p>Par défaut, le client ne peut exploiter les ressources systèmes de la machine sur lequel la navigateur est excécuté. Il devra donc demander son IP publique à un service internet (une application web).</p>
</div>
<div class="paragraph">
<p>Exemple de service pour connaître sin IP (n&#8217;hésitez pas à le tester):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://api.ipify.org/?format=json</pre>
</div>
</div>
<div class="sect2">
<h3 id="_création_du_service"><a class="anchor" href="#_création_du_service"></a>Création du service</h3>
<div class="paragraph">
<p>On appelle <em>service</em> une classe qui propose des fonctionnalités utilisables par différents composants.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
L&#8217;application actuelle n&#8217;a qu&#8217;un seul composant. Nous pourrions donc nous dispenser de créer un service et coder ce service dans la classe du composant. Mais faire ainsi n&#8217;est pas dans les bonne pratiques, car on chargerait ainsi notre composant de trop de responsabilités.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;odre suivant permet de créer un service :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ng generate service service/Ip</pre>
</div>
</div>
<div class="paragraph">
<p>Le service <code>src/app/service/ip.service.ts (138 bytes)</code> est alors créé.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class IpServiceService {

  constructor() { }
}</pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;instance de ce service est <em>injectable</em> dans d&#8217;autres composants par simple déclaration.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
C&#8217;est une application du principe d&#8217;IOC (<em>Inversion Of Control</em>). Voir <a href="https://fr.wikipedia.org/wiki/Inversion_de_contr%C3%B4le" class="bare">https://fr.wikipedia.org/wiki/Inversion_de_contr%C3%B4le</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nous allons spécialiser ce service (actuellement il ne fait rien).</p>
</div>
<div class="paragraph">
<p>Ce service a besoin de lancer des requêtes HTTP vers <code>api.ipify.org</code>. Pour cela nous allons utilser un autre service dédié à cette tache : <code>HttpClient</code> du module intégré à angular : <code>@angular/common/http</code>.</p>
</div>
<div class="paragraph">
<p>Cette dépendance doit être déclarée au niveau global, dans le fichier <strong><code>app.module.ts</code></strong> vu précédemment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import { HttpClientModule } from "@angular/common/http";
...

imports: [
    BrowserModule,
    HttpClientModule
]

...</pre>
</div>
</div>
<div class="paragraph">
<p>&#8658; On vient d&#8217;ajouter le service <code>HttpClientModule</code> aux services importés.</p>
</div>
<div class="listingblock">
<div class="title">src/app/service/ip.service.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Injectable } from '@angular/core';
import { HttpClient  } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class IpService  {
  constructor(private http:HttpClient) { }  <i class="conum" data-value="1"></i><b>(1)</b>

  public getIPAddress() : Observable&lt;any&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  {
    return this.http.get("http://api.ipify.org/?format=json") <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La propriété nommée <code>http</code> est déclarée et sera automatiquement valorisée à la création d&#8217;une instance de cette classe. C&#8217;est une syntaxe courte (un sucre syntaxique).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Déclaration d&#8217;une méthode qui retourne une référence vers un objet <code>Observable</code>, qui est le type de retour de la méthode <code>get</code> utilisée ici.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>this.http</code> fait référence à la propriété de l&#8217;instance (celle déclarée en paramètre du constructeur)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Voilà, nous venons de créer une classe de type service. Nous allons maintenant en faire usage.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utilisation_du_service"><a class="anchor" href="#_utilisation_du_service"></a>Utilisation du service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous allons intégrer ce service dans <code>app.component.ts</code>. Cela passe par une importation (déclaration de dépendance) et une injection d&#8217;une instance de notre service dans le constructeur.</p>
</div>
<div class="paragraph">
<p>Dans la foulée, nous implémentons la méthode <code>getIpAddress()</code> :</p>
</div>
<div class="listingblock">
<div class="title">src/app/app.component.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Component } from '@angular/core';
import { IpService } from './service/ip.service';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  constructor(private ipService:IpService){}

  title: string = 'projet titre';

  ipAddress: string = 'Inconnue IP'

  getIP()
  {
    this.ipService.getIPAddress().subscribe((res:any)=&gt;{
      this.ipAddress=res.ip;
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il ne nous reste qu&#8217;à lier la variable <code>ipAddress</code> à la vue :</p>
</div>
<div class="listingblock">
<div class="title">src/app/app.component.html</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">...
 &lt;h2&gt;{{ ipAddress }}&lt;/h2&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce qui donne.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/InconnueIP.png" alt="InconnueIp">
</div>
<div class="title">Figure 3. localhost:4200</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_travaux_pratiques_2"><a class="anchor" href="#_travaux_pratiques_2"></a>Travaux pratiques</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Il semblerait que l&#8217;instruction <code>{{ipAddress}}</code> dans la vue nous donne la <strong>valeur par défaut</strong> de la propriété de même nom de la classe TypeScript du composant. Trouvez un moyen pour corriger cela.</p>
</div>
<div class="paragraph">
<p>Il existe plusieurs façons d&#8217;opérer. Faites marcher votre logique en premier, puis, si cela ne suffit pas, passez en mode connecté internet.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Faire en sorte que l&#8217;application présente l&#8217;adresse IP du client sur la page principale, et non <strong>Inconnue IP</strong>.
]</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Un projet edu <a href="https://ldv-melun.github.io/sio-slam/">SIO SLAM</a> - build on Antora MPL-2.0 license.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
